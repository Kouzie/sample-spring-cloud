server.port=${PORT:8083}
spring.datasource.url=jdbc:h2:mem:product-${INSTANCE:0};DATABASE_TO_UPPER=false;DB_CLOSE_DELAY=-1

logging.config=classpath:logback-local.xml
spring.zipkin.base-url=http://localhost:9411/

spring.rabbitmq.host=localhost
spring.rabbitmq.port=5672
spring.rabbitmq.username=guest
spring.rabbitmq.password=guest

# 점대점 통신 설정, default 값 input 과 output 이름으로 exchange 가 생성된다.
spring.cloud.stream.rabbit.bindings.input.consumer.exchange-type=direct
spring.cloud.stream.rabbit.bindings.output.producer.exchange-type=direct
#spring.cloud.stream.rabbit.bindings.input.consumer.exchange-type=topic
#spring.cloud.stream.rabbit.bindings.output.producer.exchange-type=topic
spring.cloud.stream.rabbit.bindings.output.producer.routing-key-expression='#'

# destination 속성으로 기본 exchange 명에서 변경 가능.
spring.cloud.stream.bindings.input.destination=productOrdcersOut
# 컨슈머 그룹을 지정함으로 메세지를 해당 그룹중 하나의 인스턴스에서만 처리할 수있도록 한다.
spring.cloud.stream.bindings.input.group=product
spring.cloud.stream.instance-index=${INSTANCE:0}
spring.cloud.stream.bindings.output.destination=productOrdersIn